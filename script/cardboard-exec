#!/bin/sh
# Make sure local dependencies are available.

set -e

cd $(dirname "$0")/..

BIN=.bundle/binstubs
CARDBOARD=$BIN/cardboard
SCRIPT=$(basename "$0")

rm -rf .bundle/{binstubs,config}

bundle install --binstubs "$BIN" --path .bundle --quiet && "$CARDBOARD" bootstrap
[ "$SCRIPT" = "bootstrap" ] || exec "$CARDBOARD" "$SCRIPT" "$@"
